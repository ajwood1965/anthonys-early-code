#include <exec/types.h>
#include <intuition/intuition.h>

static struct NewWindow SMON_NewWindow = {
   430,
   150,
   200,
   59,
   BLACK,
   WHITE,
   CLOSEWINDOW|NEWSIZE|MOUSEBUTTONS|RAWKEY,
   WINDOWSIZING|ACTIVATE|NOCAREREFRESH|WINDOWDRAG|WINDOWDEPTH|WINDOWCLOSE,
   0,0,
   "SMPTE Output", /** TITLE **/
   0,0,
   150,52,1024,1024,
   CUSTOMSCREEN
   };

/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
char stTopaz[] = "topaz.font";

struct TextAttr taPlain =
{
	stTopaz, 8, FS_NORMAL, FPF_ROMFONT
};

struct IntuiText ItemText[] =
{
	{ 0, 1, JAM1, 0, 1, &taPlain, "   Generate External", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, "   Generate Internal", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Reset 00:00:00:00", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Reset 00:00:00:00", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Reset 00:00:00:00", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Reset 00:00:00:00", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, "·····················", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Set Time Code #1", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Set Time Code #2", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Set Time Code #3", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Set Time Code #4", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, "   Video Synchronized", NULL },
	{ 0, 1, JAM1, 0, 1, &taPlain, " Clear SMPTE Time", NULL },
};

struct MenuItem Items[] =
{
	{
		&Items[1], 0, 0, 177, 10, ITEMENABLED | ITEMTEXT |HIGHCOMP | MENUTOGGLE,
		0, (APTR)&ItemText[0], NULL, NULL, NULL, NULL 
	},
	{
		NULL, 0, 10, 177, 10, ITEMENABLED | ITEMTEXT | CHECKIT | HIGHCOMP | MENUTOGGLE,
		0, (APTR)&ItemText[1], NULL, NULL/*'F'*/, NULL, NULL 
	},

/******************/
	{
		&Items[3], 0, 30, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[2], NULL,'1', NULL, NULL 
	},
	{
		&Items[4], 0, 40, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[3], NULL,'2', NULL, NULL 
	},
	{
		&Items[5], 0, 50, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[4], NULL,'3', NULL, NULL 
	},
	{
		&Items[6], 0, 60, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[5], NULL,'4', NULL, NULL 
	},
	{
		&Items[7], 0, 70, 185, 10, ITEMENABLED | ITEMTEXT,
		0, (APTR)&ItemText[6], NULL, NULL, NULL, NULL 
	},
	{
		&Items[8], 0, 80, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[7], NULL, '!', NULL, NULL 
	},
	{
		&Items[9], 0, 90, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[8], NULL, '@', NULL, NULL 
	},
	{
		&Items[10], 0, 100, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[9], NULL, '#', NULL, NULL 
	},
	{
		&Items[11], 0, 110, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[10], NULL, '$', NULL, NULL 
	},


	{
		&Items[12], 0, 0, 185, 10, ITEMENABLED | MENUTOGGLE | ITEMTEXT | HIGHCOMP | CHECKIT | CHECKED,
		0, (APTR)&ItemText[11], NULL,NULL, NULL, NULL 
	},
	{
		&Items[13], 0, 10, 185, 10, ITEMENABLED | ITEMTEXT | HIGHCOMP|COMMSEQ,
		0, (APTR)&ItemText[12], NULL,'X', NULL, NULL 
	},

	{
		NULL, 0, 20, 185, 10, ITEMENABLED | ITEMTEXT ,
		0, (APTR)&ItemText[6], NULL, NULL, NULL, NULL 
	},
};

struct Menu Titles[] =
{
	{ NULL      , MENU_OFFSET, 0, 118, 0,MENUENABLED," SmpteOutput", &Items[2] }

/*	{ &Titles[1], MENU_OFFSET      , 0, 118 , 0, MENUENABLED, " SmpteOutput", &Items[0] },
	{ NULL      , MENU_OFFSET+118+1, 0, 11*8, 0,MENUENABLED," Set/Reset", &Items[2] },*/
};

/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
#define GOFF 1234562
#define GON   433214
#define GQUIT 6311314
int GENERATING=GOFF;
extern int tcadd;
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
void PLAYfunc(b)
struct button *b;
{
if (b->flags&BUTN_HIT)
	{
	if (GENERATING!=GOFF) GENERATING=GQUIT;
	while (GENERATING!=GOFF) WaitTOF();
	if (EditMode!=-1) EditDigit(EditMode);
	tcadd=1;
	OutputTimeCode(curtc);
	}
}
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
void REWfunc(b)
struct button *b;
{
if (b->flags&BUTN_HIT)
	{
	if (GENERATING!=GOFF) GENERATING=GQUIT;
	while (GENERATING!=GOFF) WaitTOF();
	if (EditMode!=-1) EditDigit(EditMode);
	tcadd=SubTimeCode(0,15,30);
	OutputTimeCode(curtc);
	}
}
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
void FFfunc(b)
struct button *b;
{
if (b->flags&BUTN_HIT)
	{
	if (GENERATING!=GOFF) GENERATING=GQUIT;
	while (GENERATING!=GOFF) WaitTOF();
	if (EditMode!=-1) EditDigit(EditMode);
	tcadd=15;
	OutputTimeCode(curtc);
	}
}
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
void STOPfunc(b)
struct button *b;
{
if (b->flags&BUTN_HIT)
	{
	if (GENERATING!=GOFF) GENERATING=GQUIT;
	while (GENERATING!=GOFF) WaitTOF();
	}
}
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
struct NewButton FFBut = {
	NULL,					/* *next (gadget) */
	0,0,0,0,			/* Box x1,y1,x2,y2 */
	BUTN_COOL|MANUAL_XOR|BUTN_TOGGLE|KEEP_ONE_ACTIVE,	/* Flags */
	FFfunc,				/* Call Function */
	NULL,					/* user_data */
	NULL,					/* COLORS */
	123,					/* id */
	NULL,					/* MsgPort *notifyme */
	NULL,					/* *gad_ptr */
	"FF"};				/* *text */
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
struct NewButton RewBut = {
	&FFBut,					/* *next (gadget) */
	0,0,0,0,			/* Box x1,y1,x2,y2 */
	BUTN_COOL|MANUAL_XOR|BUTN_TOGGLE|KEEP_ONE_ACTIVE,	/* Flags */
	REWfunc,				/* Call Function */
	NULL,					/* user_data */
	NULL,					/* COLORS */
	123,					/* id */
	NULL,					/* MsgPort *notifyme */
	NULL,					/* *gad_ptr */
	"Rew"};				/* *text */
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
struct NewButton StopBut = {
	&RewBut,					/* *next (gadget) */
	0,0,0,0,			/* Box x1,y1,x2,y2 */
	BUTN_COOL|MANUAL_XOR|BUTN_TOGGLE|KEEP_ONE_ACTIVE|BUTN_HIT,	/* Flags */
	STOPfunc,				/* Call Function */
	NULL,					/* user_data */
	NULL,					/* COLORS */
	123,					/* id */
	NULL,					/* MsgPort *notifyme */
	NULL,					/* *gad_ptr */
	"Stop"};				/* *text */
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
struct NewButton PlayBut = {
	&StopBut,				/* *next (gadget) */
	0,0,0,0,			/* Box x1,y1,x2,y2 */
	BUTN_COOL|MANUAL_XOR|BUTN_TOGGLE|KEEP_ONE_ACTIVE,	/* Flags */
	PLAYfunc,				/* Call Function */
	NULL,					/* user_data */
	NULL,					/* COLORS */
	123,					/* id */
	NULL,					/* MsgPort *notifyme */
	NULL,					/* *gad_ptr */
	"Play"};				/* *text */
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
/*­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­·­*/
