Player Handler sequence goes like this:

1. handler code is loaded and launched as a process by PS12
2. handler allocates itself a private port
2. PS12 waits for an I_AM_ALIVE msg to arrive at it's public port.
3. PS12 extracts the handlers port address from msg
4. handler goes into endless loop waiting for a command

play sequence goes like this:

1. PS12 sends CMD_BEGIN_PLAYING
2. handler sends MSG_READY_FOR_DATA
3. PS12 sends DATA command
4. handler begins playing, and keeps sending SEND_DATA msgs until its
   internal buffers are full
5. PS12 send CMD_STOP_PLAYING


COMANDS (CMD_) are sent by PS12. MESSAGES (MSG_) are sent by handler to PS12

commands:

CMD_BEGIN_PLAYING

Tells the player handler to start playing a digital sound.  The player
handler should immediately start sending MSG_READY_FOR_DATA msgs to the
main program.

arg1:   channel number
arg2:   sampling rate
arg3:   volume
arg4:   sample length

CMD_QUE_PLAY

Tells the player handler to begin playing when the specified time code
is reached.  Player should send MSG_READY_FOR_DATA immediately so it can
buffer data for immediate playback when the time code is reached.

Arguments are the same as CMD_BEGIN_PLAYING

CMD_DATA

PS12 is sending a block of data. arg1 points to 512 words of 16 bit data.
arg2 contains the length of the data.  This will be equal to BLOCK_SIZE,
unless this is the last block (indicated by LAST_BLOCK being set in flags.)

flags: LAST_BLOCK
arg1: pointer to buffer full of data
arg2: length of data (will be <= BLOCK_SIZE on last block,
      and ==BLOCK_SIZE for all other blocks

CMD_STOP_PLAYING

arg1: unit (channel) number

PS12 is telling handler to quit playing and flush buffers.

CMD_CLOSEDOWN

no arguments

Handler should de-allocate all resources then Replay(); Wait(0);
PS12 will remove the process after it gets a reply.

MSG_READY_FOR_DATA

This msg is sent by the play handler when it wants to recieve some more data
for playing.  PS12 will respond by sending a CMD_DATA.  THe play handler
should only send one MSG_READY_FOR_DATA at a time, waiting for CMD_DATA
between msgs.

no argumants

MSG_I_AM_ALIVE

This msg is send by the play handler after it allocates its required memory
and ports.  This informs PS12 that the handler has been successfully
launched and is now ready to recieve cmds.

arg1: pointer to play handlers MsgPort.

MSG_FATEL_ERROR

arg1: error code


NOTES
=====

Current verions of play handlers assume that CMD's will never be sent out of
sequence.  For example, if PS12 send a CMD_DATA followed by a
CMD_STOP_PLAYING, this code will lock up.  The PS12 will be waiting for a
reply to its CMD_STOP_PLAYING and the play handler will be waiting for a
reply to its MSG_READY_FOR_DATA!

To avoid this problem, PS12 will send CMD_STOP_PLAYING instead of a
CMD_DATA.

*/
