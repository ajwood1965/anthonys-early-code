

#include "exec/types.h"
#include "intuition/intuition.h"
#include "graphics/gfxbase.h"
#include "graphed.h"
#include "desk.h"

openkit(screen,rp,topedge,color,box)
struct Screen *screen;
struct RastPort *rp;
int *topedge,color;
struct Border *box;
{

static USHORT toolbData[] =
{

0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xE000,0x8000,0x0080,0x0001,0x0000,0x0100,
0x0002,0x0000,0x0200,0x0004,0x0000,0x0400,
0x0004,0x0000,0x0800,0x0008,0x0000,0x0100,
0x0000,0x2000,0x8300,0x6080,0x0001,0x0000,
0x0100,0x0002,0x0000,0x0200,0x0004,0x0000,
0x040F,0x8004,0x001C,0x0800,0x0008,0x0000,
0x0100,0x0000,0x2000,0x8380,0xE080,0x0001,
0x0000,0x0107,0xFF82,0x01FF,0xE200,0x0004,
0x0000,0x0418,0xC004,0x063E,0x0838,0x0708,
0x0000,0x0100,0x0000,0x2000,0x81C1,0xC080,
0x3F01,0x0000,0x0104,0x0082,0x0100,0x2272,
0x13C4,0x7873,0xE420,0x2004,0x0F3E,0x0820,
0x0108,0x0000,0x0100,0x0000,0x2000,0x80E3,
0x808C,0xD5C1,0x0000,0x0104,0x0082,0x0100,
0x2242,0x1224,0x4488,0x8420,0x2004,0x461C,
0x0820,0x0108,0x0000,0x0100,0x0000,0x2000,
0x8077,0x0092,0xAAA1,0x0000,0x0104,0x0082,
0x0100,0x2272,0x1224,0x4488,0x8420,0x2004,
0x0000,0x0800,0x0008,0x0000,0x0100,0x0000,
0x2000,0x807F,0x008F,0xFFE1,0x1FFF,0xF104,
0x0082,0x0100,0x2242,0x13C4,0x7888,0x8420,
0x2004,0x0000,0x0800,0x0008,0x0000,0x0100,
0x0000,0x2000,0x8049,0x0080,0x80F1,0x1FFF,
0xF104,0x0082,0x03FF,0xE242,0x1204,0x4488,
0x8420,0x3004,0x00FC,0x0800,0x0008,0x0000,
0x0100,0x0000,0x2000,0x807F,0x0081,0xFF71,
0x0000,0x0104,0x0082,0x07FF,0xE243,0xD204,
0x4270,0x8418,0xFC04,0x00FC,0x0820,0x0108,
0x0000,0x0100,0x0000,0x2000,0x8076,0x0083,
0x0039,0x0000,0x0104,0x0082,0x0C00,0x0200,
0x0004,0x0000,0x040F,0x9F04,0x18FC,0x0820,
0x0108,0x0000,0x0100,0x0000,0x2000,0x803E,
0x0087,0x0019,0x0000,0x0107,0xFF82,0x0E00,
0x0200,0x0004,0x0000,0x0400,0x0784,0x18FC,
0x0838,0x0708,0x0000,0x0100,0x0000,0x2000,
0x8008,0x0080,0x0001,0x0000,0x0100,0x0002,
0x7F80,0x0200,0x0004,0x0000,0x0400,0x0184,
0x0000,0x0800,0x0008,0x0000,0x0100,0x0000,
0x2000,0x8000,0x0080,0x0001,0x0000,0x0100,
0x0002,0x0000,0x0200,0x0004,0x0000,0x0400,
0x0004,0x0000,0x0800,0x0008,0x0000,0x0100,
0x0000,0x2000,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xE000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
};
static struct BitMap toolb =
{
0,17,0,4,0,
                    /*291,54,1,  Width, Height, Depth */
&toolbData[0],
&toolbData[0],
&toolbData[0],
&toolbData[0],
0,0,0,0
};



static USHORT toolaData[] =
{

0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFE,
0x8000,0x0000,0x0001,0x8000,0x0000,0x0001,
0x8000,0x0000,0x0001,0x8000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x800F,0x0000,0xF001,0x8000,0x0000,0x0001,
0x8000,0x0000,0x0001,0x8000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0007,0xFC00,0x0003,
0x0000,0x000F,0xC003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8007,0xC003,0xE001,0x8000,0x0000,0x0001,
0x8000,0x0000,0x0001,0x800F,0xFFFF,0xE003,
0x0000,0x7FFF,0xFF83,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x003C,0x0780,0x0003,
0x0000,0xF03F,0xF003,0x007C,0x0000,0x7C03,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8003,0xF00F,0xC001,0x8000,0x07FF,0x8001,
0x8000,0x0000,0x0001,0x800C,0x0000,0x6003,
0x0000,0x4000,0x0083,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0060,0x00C0,0x0003,
0x0001,0xF83F,0xF003,0x0040,0x0000,0x0403,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0xF81F,0x0001,0x81F0,0x7D55,0x7001,
0x8000,0x0000,0x0001,0x800C,0x0000,0x6003,
0x0000,0x4000,0x0083,0x000F,0x1023,0xC003,
0x1E1C,0x7C21,0xF3C3,0x00C0,0x0060,0x0003,
0x00C0,0xF00F,0xC003,0x0040,0x0000,0x0403,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x3E7C,0x0001,0x831D,0xAAAA,0xAC01,
0x8000,0x0000,0x0001,0x800C,0x0000,0x6003,
0x0000,0x4000,0x0083,0x0008,0x1022,0x2003,
0x1122,0x1050,0x4203,0x00C0,0x0060,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x3FFC,0x0001,0x80FF,0x5555,0x5601,
0x81FF,0xFFFF,0xFF81,0x800C,0x0000,0x6003,
0x0000,0xEAAA,0xAA83,0x000F,0x1023,0xC003,
0x1E22,0x10F8,0x4383,0x00C0,0x0060,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x718E,0x0001,0x8001,0xE000,0x7D01,
0x81FF,0xFFFF,0xFF81,0x800C,0x0000,0x6003,
0x0003,0xD555,0x5583,0x0008,0x1022,0x0003,
0x1122,0x1104,0x4203,0x0060,0x00F8,0x0003,
0x0000,0x03FF,0x8003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x7FFE,0x0001,0x8007,0xDFFF,0x9F01,
0x8000,0x0000,0x0001,0x800C,0x0000,0x6003,
0x000F,0xFFFF,0xFF83,0x0008,0x1E22,0x0003,
0x111C,0x1104,0x43C3,0x003C,0x07FF,0x8003,
0x0000,0x03FF,0x8003,0x0040,0x0000,0x0403,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x3C3C,0x0001,0x801F,0x8000,0x07C1,
0x8000,0x0000,0x0001,0x800C,0x0000,0x6003,
0x001E,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0007,0xFC1F,0xF803,
0x001F,0x03FF,0x8003,0x0040,0x0000,0x0403,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x1FF8,0x0001,0x803E,0x0000,0x03E1,
0x8000,0x0000,0x0001,0x800F,0xFFFF,0xE003,
0x003F,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0001,0xFE03,
0x001F,0x03FF,0x8003,0x007C,0x0000,0x7C03,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x0180,0x0001,0x8000,0x0000,0x0001,
0x8000,0x0000,0x0001,0x8000,0x0000,0x0003,
0x07FF,0xF800,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x1C03,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0x8000,0x0000,0x0001,0x8000,0x0000,0x0001,
0x8000,0x0000,0x0001,0x8000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0003,
0x0000,0x0000,0x0003,0x0000,0x0000,0x0002,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,
0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFF,0xFFFE,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
};
static struct BitMap toola =
{
0,17,0,4,0,
                 /* 575,121,1,     Width, Height, Depth */
&toolaData[0],
&toolaData[0],
&toolaData[0],
&toolaData[0],
0,0,0,0
};

                    /*291,54,1,  Width, Height, Depth */
                 /* 575,121,1,     Width, Height, Depth */

struct NewWindow toolWindow;
struct Window *toolwin;
USHORT *chiptool;
int i,j,colors;

toolWindow.Height = 25;
if (screen->Width > 400) {
   toolWindow.LeftEdge = 32;
   toolWindow.Width = 575;
   }
else {
   toolWindow.LeftEdge = 16;
   toolWindow.Width = 291;
   }
if (screen->Height <350)
   toolWindow.TopEdge = 175;
else
   toolWindow.TopEdge = 375;
*topedge = toolWindow.TopEdge;

colors = 1<<screen->BitMap.Depth; 
if (colors > 16)
   colors = 16;

toolWindow.DetailPen = 0;
toolWindow.BlockPen = colors -1;
toolWindow.Title = NULL;
toolWindow.Flags = RMBTRAP | SMART_REFRESH | BORDERLESS;
toolWindow.IDCMPFlags = MOUSEBUTTONS;
toolWindow.Type = CUSTOMSCREEN;
toolWindow.FirstGadget = NULL;
toolWindow.CheckMark = NULL;
toolWindow.Screen = screen;
toolWindow.BitMap = NULL;
toolWindow.MinWidth = 0;
toolWindow.MinHeight = 0;
toolWindow.MaxWidth = -1;
toolWindow.MaxHeight = -1;

toolwin = NULL;
toola.BytesPerRow = 0;
toolb.BytesPerRow = 0;

toolwin = (struct Window *)OpenWindow(&toolWindow);

toola.BytesPerRow = RASSIZE(575,1);
toolb.BytesPerRow = RASSIZE(291,1);

if (toolwin != NULL) {
   if (toolWindow.Width > 400)
      rp->BitMap = &toola;

   else
      rp->BitMap = &toolb;

   ClipBlit (rp,0,0,toolwin->RPort,0,
         10,rp->BitMap->BytesPerRow * 8 ,toola.Rows ,0xee,1,0);

   if (color > colors)
      color = colors;

   i = 0;
   j = toolWindow.Width / colors;
      if (screen->Width > 325)
         j++;
   do {
      SetAPen(toolwin->RPort,i);
      RectFill(toolwin->RPort,j*i,0,j*i+j,9);
      } while (++i < colors);

      box->XY[3] = 9;
      box->XY[5] = box->XY[3];
      box->XY[4] = j;
      box->XY[6] = box->XY[4];
      DrawBorder (toolwin->RPort,box,j * color ,0);

   }
ender:

return(toolwin);

}

